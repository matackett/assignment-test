on: 
  push:
    paths:
    - 'test.Rmd'
name: Check RMarkdown Renders
jobs:
  check: 
    runs-on: ubuntu-latest
    container:
      image: rocker/tidyverse:latest
    steps:
    - name: Checkout
    - uses: actions/checkout@master
    - name: Install missing packages
      run: |
        missing = checklist::missing_pkgs(dir = "./", glob = "test.Rmd")
        if (length(missing) > 0)
          install.packages(pkgs = missing) 
      shell:  Rscript{0}
    - name: Check Renders
      run:  |
        checklist::check_rmd_renders("test.Rmd")
      shell:  Rscript{0}